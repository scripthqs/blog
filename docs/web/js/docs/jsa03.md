# js 数据类型

在计算机中，不同的数据所需的存储空间不同，为了充分利用存储空间，就定义了不同的数据类型。js一共6种数据类型（es6之前），5种原始数据类型（值类型），1种引用数据类型（引用类型）。2021年，已经有8种数据类型。

- **`String` 字符串**
- **`Number` 数值**
- **`Boolean` 布尔值**
- **`Null` 空值**
- **`Undefined` 未定义**
- **`Symbol` (ES6) 独一无二的值类型。**
- **`BigInt` (ES10) 大整数基本类型。**

## 1、Number

js数字类型既可以用来保存整数值，也可以保存小数（浮点数）。

值在双精度 64 位二进制（-(2^53 -1) 到 2^53 -1）。

几个特殊的数字：

```js
    +Infinity 正无穷，超过最大值返回
    -Infinity 负无穷
    NaN 非数值，Not-a-Number
    Number.MAX_VALUE js可表示的最大值
    Number.MIN_VALUE js可表示的最小正值
```

- NaN与任何值都不相等，包括NaN本身，Undefined和任何数值计算的结果都是NaN。

- `+0 === -0`但是做分母是，返回值不一样

### 1.1、数字进制

- 十进制：没有前导0的数值。
- 八进制：有前缀0o或0O的数值，或者有前导0、且只用到0-7的八个阿拉伯数字的数值。
- 十六进制：有前缀0x或0X的数值。
- 二进制：有前缀0b或0B的数值

### 1.2、基本运算

- `+`只有在两边都是Number类型时，才是数字相加，否则就是连字符，用来连接字符串。

- `-`时，"2"-1得到的结果却是数值1，字符串会自动做隐式转换。

### 1.3、运算精度

JS中整数运算基本可以保证准确，小数运算很可能得到一个不准确的结果。要进行准确的运算的方法；

- 简单精度 使用`toFix()`方法进行小数的截取
- 实际开发中，可以使用数学运算开源库
  - Math.js 文件很大，压缩的文件500kb，涉及大型的复杂运算使用
  - decimal.js 轻量的运算库，压缩的文件32kb，大多数数学运算项目都可以满足。

开源库既可以使用cdn的方式引用，也可以使用npm包的方式引入。

### 1.4、数值相关的全局方法

1. parseInt()将字符串转换成整数

   - 头部空格会自动消除- 不是字符串，则会先转为字符串再转换

   - 第一个字符不能转换成数字（除后面直接跟着数字的正负号），返回NaN。

   - 返回值只有两种可能，十进制整数或者NaN。

   - 字符串以0x或0X开头，parseInt会将其按照十六进制数解析

   - 如果字符串以0开头，将其按照10进制解析或者8进制。

   - 科学计数法不好使，e会被当成普通字母。

   - parseInt方法还可以接受第二个参数（2到36之间，如果第二个参数没有意义则会被忽略），表示被解析的值的进制。默认值是10。

     ````js
               parseInt(1000000000000000000000.5) // 1
               // 等同于
               parseInt('1e+21') // 1
               parseInt(0.0000008) // 8
               // 等同于
               parseInt('8e-7') // 8
     ````

     ````js
               parseInt('1000', 2) // 8
               parseInt('1000', 6) // 216
               parseInt('1000', 8) // 512
     ````

2. parseFloat()将一个字符串转为浮点数。

   - 科学计数法好使。
   - 空字符串转为NaN。

3. isNaN()方法可以用来判断一个值是否为NaN。

   - 只对数值有效，如果传入其他值，会被先转成数值。

   - isNaN为true的值，有可能不是NaN，而是一个字符串。

   - 对于对象和数组，isNaN也返回true。

   - 但是对于空数组和只有一个数值成员的数组，isNaN又返回false。

   - NaN是唯一不等于自身的值，这是最可靠的方法。

     ```js
         function myIsNaN(value) {
             return value !== value;
         }
     ```

4. isFinite()方法返回一个布尔值，表示某个值是否为正常的数值。
   - Infinity、-Infinity、NaN和undefined这几个值会返回false
   - `isFinite`对于其他的数值都会返回true。

## 2、String

字符串使用单引号或者双引号。要点：

- `''`引号间什么都不写，称为空字符串。
- 同类引号不能嵌套。
- 对于一些特殊的符号，可以使用`\`作为转义字符。
  - `\'` 单引号
  - `\"` 双引号
  - `\n` 换行
  - `\r`回车
  - `\b`空格

### 2.1、获取字符串的长度

字符串由若干份字符串组成，这些字符的数量就是字符串的长度，可以通过length属性获取整个字符串的长度。

````js
        var str1 = '你好';
        var str2 = 'hello';
        var str3 = 'hello world';
        var str4 = 'hello,world';
        console.log(str1.length); // 2
        console.log(str2.length); // 5
        console.log(str3.length); // 11
        console.log(str4.length); // 11
````

- 一个中文、英文都算一个字符
- 一个中文标点、英文标点算一个字符
- 一个空格算一个字符，多个连续空格也算多个字符。

### 2.2、字符串的拼接

多个字符串之间可以使用加号 `+` 进行拼接。

`字符串 + 任意数据类型 = 拼接之后的新字符串`

拼接前，任意数据类型会强制转换成字符串，然后再拼接成一个新的字符串。应用：

- `'' + 任意数据类型` 可以强制转换成字符串

### 2.3、字符串与数组

- 字符串可以视为字符数组，因此可以使用方括号运算符，用来返回某个位置的字符，从0开始。

````js
        var s = 'hello';
        console.log(s[0])// "h"
        console.log(s[1])// "e"
        console.log(s[4])// "o"
        // 直接对字符串使用方括号运算符
        console.log('hello'[1]) // "e"
````

- 如果方括号中的数字超过字符串的长度，或者方括号中根本不是数字，则返回undefined。
- 字符串与数组的相似性仅此而已。实际上，无法改变字符串之中的单个字符。

### 2.4、字符串的不可改变性

字符串里面的值不可被改变，虽然看上去内容变了，其实是地址变了，内存中开辟了新的空间。

````js
var str = 'hello';
str = 'world';
````

当重新给变量str赋值时，常量'hello'不会被修改，依然保存在内存中，str会改为指向`world`。

### 2.5、模板字符串（模板字面量）

````js
          var name = 'tom';
          var age = '17';
          console.log('我是' + name + ',age:' + age);//传统写法
          console.log(`我是${name},age:${age}`);//ES6新语法
````

注意：ES6新语法括号中不是单引号，而是TAB键上方的符号。

- 模板字符串中可以直接换行

````js
          var name = 'tom';
          var age = '17';
          console.log(`我是${name},
          age:${age}`);//ES6新语法
````

- 在模板字符串中插入表达式

````js
          var a = 2;
          var b = 1;
          console.log(`和为${a+b}，积为${a*b}`);//ES6新语法
````

- 模板字符串中可以调用函数
- 模板字符串支持嵌套使用

### 2.6、字符串的方法

在计算机底层，字符串是以字符数组的形式保存的。

- `indexOf(想要查询的字符串)`检索字符串中是否含有指定内容，找到返回索引，没有返回-1
- `charAt()`根据索引获取指定索引的字符，直接写`[]`也可以
- `charCodeAt()`获取索引处的Unicode编码
- `String.fromCharCode()`根据Unicode编码获取
- `concat`和`+`一样
- `slice()`可以在字符串中截取指定内容
- `substring()`截取字符串，不同的是这个方法不能接受负值，默认使用0，会自动交换
- `splice()`删除指定的一个或多个元素
- `split()`可以将字符串拆分成一个数组，传递一个字符串作为参数，根据该字符串拆分数组
- `toUpperCase()`将字符串转换成大写并返回
- `toLowerCase()`将字符串装换成小写并返回

## 3、Boolean

布尔值有两个`true` 和 `false`。千万不能加引号，主要用来做逻辑判断：

- true 表示真
- false 表示假

布尔型和数字型相加时，

- true 按 1 来算
- false 按 0 来算

对于以下几个值转换成布尔值时为false，其他都是true。

- undefined
- null
- false
- 0
- NaN
- ""或'' 空字符串

注意：空数组（[]）和空对象（{}）对应的布尔值，都是true。

## 4、Null和Undefined

null专门用来定义空对象，如果想定义一个变量引用类型，但是暂时还没想好放什么内容，可以设置为null。

- Null类型的值只有一个，就是null。
- 使用typeof检查一个null值时，会返回object。

undefined未定义，使用的情况：

- 变量已声明，但未赋值，此时该变量的值就是undefined
- 变量未声明未定义时，直接使用会报错，使用typeof检查则返回undefined。
- 如果一个函数没有返回值，那么，这个函数的返回值就是 undefined。在定义一个函数时，如果末尾没有return语句，那么其实就是`return undefined`
- 调用函数时，如果没有传参，那么这个值就是undefined。

### 4.1、null和undefined的区别

- null == undefined 为true
- null === undefined 为false
- 和数字做运算时：
  - 10 + null 结果时10
  - 10 + undefined 结果为NaN

- 任何数据类型和undefined运算都是NaN，任何值和null运算都相当于和0运算。

总结：

- `undefined`代表定义了未赋值
- `null`代表定义了也赋值了，只是赋的值为null

什么时候赋值为null；

- 初始赋值为`null`时，代表将要赋值为对象。
  - `var b = null`代表b将要赋值为称对象
  - `b = [1,2,3]`确定对象并赋值。
- 最后赋值为`null`，表示释放对象内存。
  - `b = null`让b指向的对象称为垃圾对象，被垃圾回收器回收。
