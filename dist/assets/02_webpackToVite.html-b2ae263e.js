import{_ as n,r as t,o,c as i,b as s,e as a,d as p,f as r}from"./app-007a9be1.js";const l={},c=s("h1",{id:"webpack-vite",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#webpack-vite","aria-hidden":"true"},"#"),a(" webpack -> vite")],-1),u=s("h2",{id:"vue-cli-webpack-升级-vite-攻略",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#vue-cli-webpack-升级-vite-攻略","aria-hidden":"true"},"#"),a(" vue-cli(webpack)升级 vite 攻略")],-1),d=s("p",null,"为什么要升级?",-1),v=s("p",null,"项目越来越大,原有的编译速度越来越慢,严重影响开发效效率,而 Vite 以原生 ESM 方式提供源码,让浏 览器接管了打包程序的部分工作,节省了这部分的打包时间同,从而编译起来显得快多了。",-1),k={href:"https://vitejs.dev/guide/why.html",target:"_blank",rel:"noopener noreferrer"},g=s("li",null,[s("p",null,"提升编译构建速度 26 倍")],-1),h=r(`<h2 id="去掉之前-webpack-相关依赖" tabindex="-1"><a class="header-anchor" href="#去掉之前-webpack-相关依赖" aria-hidden="true">#</a> 去掉之前 webpack 相关依赖</h2><ol><li>首先需要把 node_modules 删掉，</li><li>更新 package.json，如果直接安装 vite，可能装不上，需要把开发依赖 devDependencies 去掉</li><li>删掉 webpack 之前相关的 babel.config.js，jsconfig.json，eslintConfig、eslintrc、postcss</li></ol><h2 id="升级-vue" tabindex="-1"><a class="header-anchor" href="#升级-vue" aria-hidden="true">#</a> 升级 vue</h2><p>vue 2.7.14 版本以上</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token string-property property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.7.16&quot;</span>
<span class="token string-property property">&quot;vue-template-compiler&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.7.16&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装-vite-相关依赖" tabindex="-1"><a class="header-anchor" href="#安装-vite-相关依赖" aria-hidden="true">#</a> 安装 vite 相关依赖</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token string-property property">&quot;@vitejs/plugin-vue2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.3.1&quot;</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;@vitejs/plugin-vue2-jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.1.1&quot;</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;vite&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5.0.12&quot;</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;vite-plugin-commonjs&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.10.1&quot;</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;vite-plugin-html&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.0&quot;</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;vite-plugin-node-polyfills&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.19.0&quot;</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;vite-plugin-require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.1.14&quot;</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;vite-plugin-svg-icons&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.0.1&quot;</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;path-browserify&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.1&quot;</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="配置-vite-config-js" tabindex="-1"><a class="header-anchor" href="#配置-vite-config-js" aria-hidden="true">#</a> 配置 vite.config.js</h2><ul><li>配置代理 devServe=&gt;server</li><li>配置别名 resolve.alias</li><li>自动为文件加后缀 resolve.extensions、</li><li>更新环境变量， p<wbr>rocess.env 为 i<wbr>mport.meta.env</li><li>定义全局 sass 文件：css.preprocessorOptions.scss.additionalData</li><li>降级 sass1.5</li><li>commonjs 不支持，使用 vite-plugin-commonjs</li></ul><h3 id="index-html" tabindex="-1"><a class="header-anchor" href="#index-html" aria-hidden="true">#</a> index.html</h3><p>在根目录创建模版 index.html，使用 vite-plugin-html， 修改原来的 html 模板变量，引入 script modules main.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;module&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;/src/main.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="常见的问题" tabindex="-1"><a class="header-anchor" href="#常见的问题" aria-hidden="true">#</a> 常见的问题</h2><ul><li>Can&#39;t find stylesheet to import：</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>解决：@<span class="token keyword">import</span> <span class="token string">&quot;~@/styles 改成 @import &quot;</span>@<span class="token operator">/</span>styles
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>This experimental syntax requires enabling one of the following parser plugin(s): &quot;jsx&quot;, &quot;flow&quot;, &quot;typescript&quot;</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>解决：script 标签添加 lang<span class="token operator">=</span><span class="token string">&quot;jsx&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>require is not defined</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>解决：require<span class="token punctuation">.</span>context 替换为 <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>glob，只支持静态字面量，不支持 alias
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>The requested module &#39;/src/styles/element-variables.scss&#39; does not provide an export named &#39;default&#39;</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>解决：element<span class="token operator">-</span>variables<span class="token punctuation">.</span>scss 改成 element<span class="token operator">-</span>variables<span class="token punctuation">.</span>module<span class="token punctuation">.</span>scss
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,21);function m(q,b){const e=t("ExternalLinkIcon");return o(),i("div",null,[c,u,d,v,s("ul",null,[s("li",null,[s("p",null,[s("a",k,[a("https://vitejs.dev/guide/why.html"),p(e)])])]),g]),h])}const y=n(l,[["render",m],["__file","02_webpackToVite.html.vue"]]);export{y as default};
